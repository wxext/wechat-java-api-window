package Lin.Wechat.MainEntry;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.InetSocketAddress;
import java.net.URLDecoder;
import org.apache.commons.io.IOUtils;
import com.sun.net.httpserver.*;

public class StartPoint {
	public static int receivePort = 12345;
	public static String apiHttp = "http://127.0.0.1:8203/api?json";

	public static void main(String[] arg) throws Exception {
/*
 * 开启服务器 接收推送 把处理器设置成TestHandler
 */
		HttpServer server = HttpServer.create(new InetSocketAddress(receivePort), 0);
		server.createContext("/", new TestHandler());
		server.start();
	}
}

class TestHandler implements HttpHandler {
	public void handle(HttpExchange exchange) throws IOException {
		InputStreamReader response = new InputStreamReader(exchange.getRequestBody(), "UTF-8");
		int d = -1;
		/*
		 * int raed()
		 * 读取一个字符，具体读取了几个字节字符流根据给定的字符集
		 * 以及实际数据自行判断
		 */
		while((d=isr.read())!=-1) {
			System.out.print((char)d);
		}
		response.close();
		System.out.println(response);
	}
}